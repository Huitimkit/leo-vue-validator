webpackJsonp([2,0],{0:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var s=r(106),n=a(s),o=r(104),i=a(o);new n.default({el:"#app",render:function(e){return e(i.default)},components:{app:i.default}})},51:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e){setTimeout(function(){alert((0,o.default)(e,null,4))})}Object.defineProperty(t,"__esModule",{value:!0});var n=r(56),o=a(n),i=r(54),u=a(i);t.default={name:"app",components:{"leo-validator":u.default},data:function(){return{form1:[{key:"formKey1",value:"",rules:[{rule:"required",tip:"请输入活动名称"},{rule:"isCode",tip:"邮政编码不正确（leo）"}],state:0,msg:""},{key:"formKey2",value:"wahahha",rules:function(e,t,r,a){r.msg="loading",setTimeout(function(){a(function(e,t,r){r.state=1,r.msg="成功"})},1e3)},state:0,msg:""}],form2:[{key:"form2Item1",value:"",rules:[{rule:"required",tip:"不能为空"},{rule:"isPhone",tip:"手机号码格式不对"}],state:0,msg:""},{key:"form2Item2",value:"",state:0,msg:""},{key:"form2Item3",value:{user:"leo",password:""},rules:[{rule:function(e,t,r,a){return""===e.user?(r.msg="user不能为空",r.state=2,void a()):(r.msg="user验证中",void setTimeout(function(){a(function(e,t,r){e.user.length>6?(r.state=2,r.msg="user不正确"):(r.state=1,r.msg="user验证成功")})},1e3))}},{rule:function(e,t,r,a){r.msg="password验证中",setTimeout(function(){a(function(e,t,r){123456==e.password?(r.state=1,r.msg="password验证成功"):(r.state=2,r.msg="password不正确")})},1e3)}}],state:0,msg:"",deep:!0},{key:"form2Item4",value:["leo","leoWa"],rules:[{rule:function(e,t,r,a){return""===e[0]||""===e[1]?(r.msg="input都不能为空",r.state=2,void a()):(r.state=3,r.msg="验证中",void setTimeout(function(){a(function(e,t,r){e[0]==e[1]?(r.state=1,r.msg=""):(r.state=2,r.msg="第一项和第二项不相等")})},1e3))}}],state:0,msg:""}]}},methods:{initForm1:function(){this.$refs.leoForm1.initForm()},initForm:function(){this.$refs.leoForm.initForm()},reset1:function(){this.$refs.leoForm1.resetFields()},submit1:function(){this.$refs.leoForm1.validate().then(function(e){s(e)}),console.log(this.$refs.leoForm1.getFormData())},reset:function(){this.$refs.leoForm.resetFields()},submit:function(){this.$refs.leoForm.validate().then(function(e){s(e)}),console.log(this.$refs.leoForm.getFormData())},add:function(){this.form1.push({key:"formKey"+(this.form1.length+1),value:"",rules:[{rule:function(e,t,r,a){"leo好帅"===e?(r.state=1,r.msg=""):(r.state=2,r.msg="请输入leo好帅"),a()}}],state:0,msg:""})},deleteItem:function(e){this.$refs.leoForm.removeField(e)}}}},52:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=/^1[3|4|5|7|8][0-9]{9}$/,a=/^\w{6,16}$/,s=/^[1-9]\d{5}$/;t.ruleFn={isPhone:function(e,t,a,s){var n="手机号码格式不对";r.test(e)?(a.state=1,a.msg=""):(a.state=2,a.msg=t.tip?t.tip:n),s()},isCode:function(e,t,r,a){var n="邮政编码不正确";s.test(e)?(r.state=1,r.msg=""):(r.state=2,r.msg=t.tip?t.tip:n),a()},password:function(e,t,r){var s="密码6-16位";a.test(e)?(r.state=1,r.msg=""):(r.state=2,r.msg=t.tip?t.tip:s)},required:function(e,t,r,a){var s="必填!";e?(r.state=1,r.msg=""):(r.state=2,r.msg=t.tip?t.tip:s),a()},isPositive:function(e,t,r,a){var s="大于0!";e>0?(r.state=1,r.msg=""):(r.state=2,r.msg=t.tip?t.tip:s),a()},right:function(e,t,r,a){var s="正确!";e===!0?(r.state=1,r.msg=""):(r.state=2,r.msg=t.tip?t.tip:s),a()}}},53:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return null==e?String(e):l[f.call(e)]||"object"}function n(){var e=void 0,t=void 0,r=void 0,a=void 0,o=void 0,i=void 0,l=arguments[0]||{},f=1,m=arguments.length,c=!1;for("boolean"==typeof l&&(c=l,l=arguments[f]||{},f++),"object"!==("undefined"==typeof l?"undefined":(0,u.default)(l))&&"function"!==s(l)&&(l={}),f===m&&(l=this,f--);f<m;f++)if(null!=(e=arguments[f]))for(t in e)r=l[t],a=e[t],l!==a&&(c&&a&&("object"===s(a)||(o=Array.isArray(a)))?(o?(o=!1,i=r&&Array.isArray(r)?r:[]):i=r&&"object"===s(r)?r:{},l[t]=n(c,i,a)):void 0!==a&&(l[t]=a));return l}function o(e){return!(!e||!e.then||"function"!==s(e.then))}Object.defineProperty(t,"__esModule",{value:!0});var i=r(36),u=a(i);t.type=s,t.extend=n,t.isPromise=o;var l={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(e){l["[object "+e+"]"]=e.toLowerCase()});var f=Object.prototype.toString},54:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=r(60),n=a(s),o=r(59),i=a(o),u=r(35),l=a(u),f=r(34),m=a(f),c=r(36),d=a(c),v=r(55),p=a(v),h=r(57),g=a(h),y=r(53),_=r(52);t.default={name:"leo-validator",render:function(e){return e(this.tag||"span",{class:this.className,style:this.style},this.$slots.default||[])},data:function(){return(0,g.default)({initFormsData:{}})},props:{forms:{type:Array,required:!0,default:function(){return[{key:"",value:"",rules:[],state:0,msg:"",deep:!1}]}},tag:{type:String,default:"span"},className:{type:[String,Object]},style:{type:Object}},watch:{forms:function(){this.leoFormInit&&(this.initForms(),this.addAllWatch())}},destroyed:function(){this.removeAllWatch()},methods:{initForm:function(){this.leoFormInit||(this.initForms(),this.addAllWatch(),this.leoFormInit=!0)},getFormData:function(){var e={},t=this.forms,r=!0,a=!1,s=void 0;try{for(var n,o=(0,p.default)(t);!(r=(n=o.next()).done);r=!0){var i=n.value;e[i.key]=this.getItemValue(i.value)}}catch(e){a=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(a)throw s}}return e},addAllWatch:function(){var e=this;this.forms.forEach(function(t,r){t.__unwatch&&t.__unwatch(),t.__unwatch=e.$watch("forms."+r+".value",function(r,a){t.__enable&&e.validateField(t)},{deep:!!t.deep})})},getItemValue:function(e){if("object"!==("undefined"==typeof e?"undefined":(0,d.default)(e)))return e;var t=Array.isArray(e)?[]:{};return(0,y.extend)(!0,t,e)},setItemValue:function(e,t){var r=e.value;"object"!==("undefined"==typeof r?"undefined":(0,d.default)(r))?e.value=t:(0,y.extend)(!0,r,t)},initForms:function(){var e=this,t=this.initFormsData;this.forms.forEach(function(r,a){var s=t[r.key];s?(r.__enable=!1,e.$nextTick(function(){r.__enable=!0})):(t[r.key]={value:e.getItemValue(r.value),msg:r.msg},r.__enable=!0,r.state=0,r.__promiseHash={})})},resetFields:function(){var e=this;if(!this.leoFormInit)throw new Error("请初始化");var t=this.initFormsData;this.forms.forEach(function(r,a){var s=t[r.key];s&&(r.__enable=!1,e.setItemValue(r,s.value),r.msg=s.msg,e.$nextTick(function(){r.__enable=!0})),r.state=0,r.__promiseHash={}})},removeAllWatch:function(){this.forms.forEach(function(e,t){e.__unwatch&&e.__unwatch(),e.__promiseHash=null})},removeField:function(e){var t=this,r=Array.isArray(e)?e:[e];r.forEach(function(e){var r=t.forms,a=r.indexOf(e);a>-1&&(e.__unwatch&&e.__unwatch(),r.splice(a,1),e.__promiseHash=null,delete t.initFormsData[e.key])})},validate:function(){var e=this;if(!this.leoFormInit)return m.default.resolve(new Error("请初始化"));var t=this.forms.map(function(t,r){var a=e.validateField(t);return(0,y.isPromise)(a)?a:m.default.resolve(a)});return m.default.all(t).then(function(){return e.getResult()})},getResult:function(){var e=this.forms,t={valid:!0,msgs:[],form:{}},r=!0,a=!1,s=void 0;try{for(var n,o=(0,p.default)(e);!(r=(n=o.next()).done);r=!0){var i=n.value;i.state>1&&(t.valid=!1,t.msgs.push(i.msg)),t.form[i.key]={value:this.getItemValue(i.value),msg:i.msg}}}catch(e){a=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(a)throw s}}return t},validateOne:function(e,t){var r=void 0;if("function"===(0,y.type)(t))r=t;else{var a=void 0;t.rule&&(a=t.rule),"string"==typeof a&&"function"==typeof _.ruleFn[a]?r=_.ruleFn[a]:"function"===(0,y.type)(a)&&(r=a)}if(r)return new m.default(function(a,s){var n=void 0;e.__promiseHash&&(n=(0,l.default)(),e.__promiseHash[n]=!0),e.state=3,r(e.value,t,e,function(r){e.__promiseHash&&e.__promiseHash[n]&&(r&&r(e.value,t,e),delete e.__promiseHash[n]),a(),n=null})})},validateField:function(e){var t=this;return(0,i.default)(n.default.mark(function r(){var a,s,o;return n.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(3!==e.state){r.next=2;break}return r.abrupt("return");case 2:if(a=e.rules){r.next=5;break}return r.abrupt("return");case 5:if(!Array.isArray(a)){r.next=19;break}if(s=a.length,0!==s){r.next=9;break}return r.abrupt("return");case 9:o=0;case 10:if(!(o<s)){r.next=18;break}return r.next=13,t.validateOne(e,a[o]);case 13:if(1===e.state){r.next=15;break}return r.abrupt("return");case 15:o++,r.next=10;break;case 18:return r.abrupt("return");case 19:return r.abrupt("return",t.validateOne(e,a));case 20:case"end":return r.stop()}},r,t)}))()}}}},100:function(e,t){},104:function(e,t,r){var a,s;r(100),a=r(51);var n=r(105);s=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(s=a=a.default),"function"==typeof s&&(s=s.options),s.render=n.render,s.staticRenderFns=n.staticRenderFns,e.exports=a},105:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return t("div",{attrs:{id:"app"}},[t("h1",["\n        leo-vue-validator例子\n    "])," ",t("h3",["\n        注意事项：必须先点击初始化按钮或者调用(initForm接口)才能验证\n    "])," ",t("h3",["\n        状态参数（state）： 0: 没有验证过, 1: 通过, 2: 不通过, 3: 验证中\n    "])," ",t("h3",["\n        自定义回调：\n            1.必须要设置item.state = 1才能验证下面的事项\n            2.必须调用回调参数cb()验证才开始\n    "])," ",t("h3",["\n        改变forms中value的值 都会进行验证\n    "])," ",t("leo-validator",{ref:"leoForm",staticClass:"form1",style:{paddingLeft:"20px"},attrs:{forms:e.form1,tag:"div"}},[t("h1",["表单1(动态添加表单)"])," ",t("ul",{staticClass:"MoUpFlo_Module MoUpFlo_enterInfo"},[e._l(e.form1,function(r,a){return t("li",{staticClass:"clearfix"},[t("label",[t("span",["item"+e._s(a)+": "])," ",t("input",{directives:[{name:"model",rawName:"v-model",value:r.value,expression:"item.value"}],staticClass:"infoVal",attrs:{type:"text"},domProps:{value:e._s(r.value)},on:{input:function(e){e.target.composing||(r.value=e.target.value)}}})])," ",t("button",{on:{click:function(t){e.deleteItem(r)}}},["删除"])," ",t("p",["状态："+e._s(r.state)+"    提示："+e._s(r.msg)])])})])," ",t("button",{on:{click:e.initForm}},["初始化"])," ",t("button",{on:{click:e.add}},["添加"])," ",t("button",{on:{click:e.submit}},["提交"])," ",t("button",{on:{click:e.reset}},["重置"])])," ",t("leo-validator",{ref:"leoForm1",class:{form2:!0},attrs:{forms:e.form2,tag:"div"}},[t("h1",["表单2"])," ",t("ul",[t("li",{staticClass:"clearfix"},[t("label",[t("span",["手机号 : "])," ",t("input",{directives:[{name:"model",rawName:"v-model",value:e.form2[0].value,expression:"form2[0]['value']"}],staticClass:"infoVal",attrs:{type:"text"},domProps:{value:e._s(e.form2[0].value)},on:{input:function(t){if(!t.target.composing){var r=e.form2[0],a="value";Array.isArray(r)?r.splice(a,1,t.target.value):e.form2[0].value=t.target.value}}}})])," ",t("p",["状态："+e._s(e.form2[0].state)+"    提示："+e._s(e.form2[0].msg)])])," ",t("li",{staticClass:"clearfix"},[t("label",[t("span",["没有验证 : "])," ",t("input",{directives:[{name:"model",rawName:"v-model",value:e.form2[1].value,expression:"form2[1]['value']"}],staticClass:"infoVal",attrs:{type:"text"},domProps:{value:e._s(e.form2[1].value)},on:{input:function(t){if(!t.target.composing){var r=e.form2[1],a="value";Array.isArray(r)?r.splice(a,1,t.target.value):e.form2[1].value=t.target.value}}}})])," ",t("p",["状态："+e._s(e.form2[1].state)+"    提示："+e._s(e.form2[1].msg)])])," ",t("li",{staticClass:"clearfix"},[t("label",[t("span",["异步验证整组验证（obj形式 失去焦点验证） : "])," ",t("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.form2[2].value.user,expression:"form2[2]['value']['user']",modifiers:{lazy:!0}}],staticClass:"infoVal",attrs:{type:"text",disabled:3==e.form2[2].state},domProps:{value:e._s(e.form2[2].value.user)},on:{change:function(t){var r=e.form2[2].value,a="user";Array.isArray(r)?r.splice(a,1,t.target.value):e.form2[2].value.user=t.target.value}}})," ",t("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.form2[2].value.password,expression:"form2[2]['value']['password']",modifiers:{lazy:!0}}],staticClass:"infoVal",attrs:{type:"text",disabled:3==e.form2[2].state},domProps:{value:e._s(e.form2[2].value.password)},on:{change:function(t){var r=e.form2[2].value,a="password";Array.isArray(r)?r.splice(a,1,t.target.value):e.form2[2].value.password=t.target.value}}})])," ",t("p",["状态："+e._s(e.form2[2].state)+"    提示："+e._s(e.form2[2].msg)])])," ",t("li",{staticClass:"clearfix"},[t("label",[t("span",["异步验证整组验证（array） : "])," ",t("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.form2[3].value[0],expression:"form2[3].value[0]",modifiers:{lazy:!0}}],staticClass:"infoVal",attrs:{type:"text",disabled:3==e.form2[3].state},domProps:{value:e._s(e.form2[3].value[0])},on:{change:function(t){var r=e.form2[3].value,a=0;Array.isArray(r)?r.splice(a,1,t.target.value):e.form2[3].value[0]=t.target.value}}})," ",t("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.form2[3].value[1],expression:"form2[3].value[1]",modifiers:{lazy:!0}}],staticClass:"infoVal",attrs:{type:"text",disabled:3==e.form2[3].state},domProps:{value:e._s(e.form2[3].value[1])},on:{change:function(t){var r=e.form2[3].value,a=1;Array.isArray(r)?r.splice(a,1,t.target.value):e.form2[3].value[1]=t.target.value}}})])," ",t("p",["状态："+e._s(e.form2[3].state)+"    提示："+e._s(e.form2[3].msg)])])])," ",t("button",{on:{click:e.initForm1}},["初始化"])," ",t("button",{on:{click:e.submit1}},["提交"])," ",t("button",{on:{click:e.reset1}},["重置"])])])},staticRenderFns:[]}}});
//# sourceMappingURL=app.f591343c38e7f4072582.js.map