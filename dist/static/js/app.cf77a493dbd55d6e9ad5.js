webpackJsonp([2,0],{0:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}var a=n(104),r=o(a),i=n(102),s=o(i);new r.default({el:"#app",render:function(t){return t(s.default)},components:{app:s.default}})},51:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(54),r=o(a);e.default={name:"app",components:{"leo-validator":r.default},data:function(){return{formOption:[{key:"factoryno",value:"aaaaaaa",rules:[{rule:"required",tip:"请输入活动名称"},{rule:"isPhone",tip:"手机号码格式不对1111111"}],state:0,msg:""},{key:"leo",value:"bbbb",rules:function(t,e,n,o){n.msg="loading",setTimeout(function(){o(function(){n.state=1,n.msg=""})},1e3)},state:0,msg:""}],formOption1:[{key:"formOption1-1",value:"1111",rules:[{rule:"required",tip:"请输入活动名称"},{rule:"isPhone",tip:"手机号码格式不对1111111"}],state:0,msg:""},{key:"formOption1-2",value:"12312312",rules:function(t,e,n,o){n.msg="loading",setTimeout(function(){o(function(){n.state=1,n.msg=""})},1e3)},state:0,msg:""},{key:"formOption1-3",value:{1:"111",2:"222"},rules:[{rule:function(t,e,n,o){n.msg="loading",console.log(111),setTimeout(function(){o(function(){n.state=1,n.msg=""})},1e3)},tip:"aaaaa"},{rule:function(t,e,n,o){n.msg="loading",console.log(323),setTimeout(function(){o(function(){t[2]===t[1]?(n.state=1,n.msg=""):(n.state=2,n.msg="324234234")})},2e3)},tip:"bbbbb"}],state:0,msg:"",deep:!0},{key:"formOption1-4",value:["1111",2222],rules:[{rule:function(t,e,n,o){n.state=3,n.msg="loading",setTimeout(function(){o(function(){t[0]===t[1]?(n.state=1,n.msg=""):(n.state=2,n.msg="buxiangdeng")})},1e3)},tip:"s23423423423"}],state:0,msg:""}]}},methods:{initForm1:function(){this.$refs.leoForm1.initForm()},initForm:function(){console.log(this.$refs.leoForm),this.$refs.leoForm.initForm()},reset1:function(){this.$refs.leoForm1.resetFields()},submit1:function(){this.$refs.leoForm1.validate().then(function(t){console.log(t)}),console.log(this.$refs.leoForm1.getFormData())},reset:function(){this.$refs.leoForm.resetFields()},submit:function(){this.$refs.leoForm.validate().then(function(t){console.log(t)}),console.log(this.$refs.leoForm.getFormData())},add:function(){var t=this;this.formOption.push({key:"leoTc"+this.formOption.length,value:"ccccccc",rules:[{rule:function(e,n,o,a){t.formOption[0].value===e?(o.state=1,o.msg=""):(o.state=2,o.msg="不一致"),a()}}],state:0,msg:""})},deleteItem:function(t){this.$refs.leoForm.removeField(t)}}}},52:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=/^1[3|4|5|7|8][0-9]{9}$/,o=/^\w{6,16}$/,a=/^[1-9]\d{5}$/;e.ruleFn={isPhone:function(t,e,o,a){var r="手机号码格式不对";n.test(t)?(o.state=1,o.msg=""):(o.state=2,o.msg=e.tip?e.tip:r),a()},isCode:function(t,e,n,o){var r="邮政编码不正确";a.test(t)?(n.state=1,n.msg=""):(n.state=2,n.msg=e.tip?e.tip:r),o()},password:function(t,e,n){var a="密码6-16位";o.test(t)?(n.state=1,n.msg=""):(n.state=2,n.msg=e.tip?e.tip:a)},required:function(t,e,n,o){var a="必填!";t?(n.state=1,n.msg=""):(n.state=2,n.msg=e.tip?e.tip:a),o()},isPositive:function(t,e,n,o){var a="大于0!";t>0?(n.state=1,n.msg=""):(n.state=2,n.msg=e.tip?e.tip:a),o()},right:function(t,e,n,o){var a="正确!";t===!0?(n.state=1,n.msg=""):(n.state=2,n.msg=e.tip?e.tip:a),o()}}},53:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function a(t){return null==t?String(t):l[f.call(t)]||"object"}function r(){var t=void 0,e=void 0,n=void 0,o=void 0,i=void 0,s=void 0,l=arguments[0]||{},f=1,c=arguments.length,m=!1;for("boolean"==typeof l&&(m=l,l=arguments[f]||{},f++),"object"!==("undefined"==typeof l?"undefined":(0,u.default)(l))&&"function"!==a(l)&&(l={}),f===c&&(l=this,f--);f<c;f++)if(null!=(t=arguments[f]))for(e in t)n=l[e],o=t[e],l!==o&&(m&&o&&("object"===a(o)||(i=Array.isArray(o)))?(i?(i=!1,s=n&&Array.isArray(n)?n:[]):s=n&&"object"===a(n)?n:{},l[e]=r(m,s,o)):void 0!==o&&(l[e]=o));return l}function i(t){return!(!t||!t.then||"function"!==a(t.then))}Object.defineProperty(e,"__esModule",{value:!0});var s=n(36),u=o(s);e.type=a,e.extend=r,e.isPromise=i;var l={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(t){l["[object "+t+"]"]=t.toLowerCase()});var f=Object.prototype.toString},54:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(59),r=o(a),i=n(58),s=o(i),u=n(35),l=o(u),f=n(34),c=o(f),m=n(36),p=o(m),v=n(55),d=o(v),g=n(56),h=o(g),y=n(53),_=n(52);e.default={name:"leo-validator",render:function(t){return t(this.tag||"span",null,this.$slots.default||[])},data:function(){return(0,h.default)({initFormsData:{}})},props:{forms:{type:Array,required:!0,default:function(){return[{key:"",value:"",rules:[],state:0,msg:"",deep:!1}]}},tag:{type:String,default:"span"}},watch:{forms:function(){this.leoFormInit&&(this.initForms(),this.addAllWatch())}},destroyed:function(){this.removeAllWatch()},methods:{initForm:function(){this.leoFormInit||(this.initForms(),this.addAllWatch(),this.leoFormInit=!0)},getFormData:function(){var t={},e=this.forms,n=!0,o=!1,a=void 0;try{for(var r,i=(0,d.default)(e);!(n=(r=i.next()).done);n=!0){var s=r.value;t[s.key]=this.getItemValue(s.value)}}catch(t){o=!0,a=t}finally{try{!n&&i.return&&i.return()}finally{if(o)throw a}}return t},addAllWatch:function(){var t=this;this.forms.forEach(function(e,n){e.__unwatch&&e.__unwatch(),e.__unwatch=t.$watch("forms."+n+".value",function(n,o){e.__enable&&t.validateField(e)},{deep:!!e.deep})})},getItemValue:function(t){if("object"!==("undefined"==typeof t?"undefined":(0,p.default)(t)))return t;var e=Array.isArray(t)?[]:{};return(0,y.extend)(!0,e,t)},setItemValue:function(t,e){var n=t.value;"object"!==("undefined"==typeof n?"undefined":(0,p.default)(n))?t.value=e:(0,y.extend)(!0,n,e)},initForms:function(){var t=this,e=this.initFormsData;this.forms.forEach(function(n,o){e[n.key]||(e[n.key]={value:t.getItemValue(n.value),msg:n.msg}),n.state=0,n.__enable=!0,n.__promiseHash={}})},resetFields:function(){var t=this;if(!this.leoFormInit)throw new Error("请初始化");this.forms.forEach(function(e,n){var o=t.initFormsData[e.key];o&&(e.__enable=!1,t.setItemValue(e,o.value),e.msg=o.msg,t.$nextTick(function(){e.__enable=!0})),e.state=0,e.__promiseHash={}})},removeAllWatch:function(){this.forms.forEach(function(t,e){t.__unwatch&&t.__unwatch(),t.__promiseHash=null})},removeField:function(t){var e=this,n=Array.isArray(t)?t:[t];n.forEach(function(t){var n=e.forms,o=n.indexOf(t);o>-1&&(t.__unwatch&&t.__unwatch(),n.splice(o,1),t.__promiseHash=null,delete e.initFormsData[t.key])})},validate:function(){var t=this;if(!this.leoFormInit)return c.default.resolve(new Error("请初始化"));var e=this.forms.map(function(e,n){var o=t.validateField(e);return(0,y.isPromise)(o)?o:c.default.resolve(o)});return c.default.all(e).then(function(){return t.getResult()})},getResult:function(){var t=this.forms,e={valid:!0,msgs:[],form:{}},n=!0,o=!1,a=void 0;try{for(var r,i=(0,d.default)(t);!(n=(r=i.next()).done);n=!0){var s=r.value;s.state>1&&(e.valid=!1,e.msgs.push(s.msg)),e.form[s.key]={value:this.getItemValue(s.value),msg:s.msg}}}catch(t){o=!0,a=t}finally{try{!n&&i.return&&i.return()}finally{if(o)throw a}}return e},validateOne:function(t,e){var n=void 0;if("function"===(0,y.type)(e))n=e;else{var o=void 0;e.rule&&(o=e.rule),"string"==typeof o&&"function"==typeof _.ruleFn[o]?n=_.ruleFn[o]:"function"===(0,y.type)(o)&&(n=o)}if(n)return new c.default(function(o,a){var r=void 0;t.__promiseHash&&(r=(0,l.default)(),t.__promiseHash[r]=!0),t.state=3,n(t.value,e,t,function(e){t.__promiseHash&&t.__promiseHash[r]&&(e&&e(),delete t.__promiseHash[r]),o(),r=null})})},validateField:function(t){var e=this;return(0,s.default)(r.default.mark(function n(){var o,a,i,s;return r.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.rules){n.next=3;break}return n.abrupt("return");case 3:if(!Array.isArray(o)){n.next=18;break}if(a=o.length,0!==a){n.next=7;break}return n.abrupt("return");case 7:i=void 0,s=0;case 9:if(!(s<a)){n.next=17;break}return n.next=12,e.validateOne(t,o[s]);case 12:if(1===t.state){n.next=14;break}return n.abrupt("return",i);case 14:s++,n.next=9;break;case 17:return n.abrupt("return");case 18:return n.abrupt("return",e.validateOne(t,o));case 19:case"end":return n.stop()}},n,e)}))()}}}},98:function(t,e){},102:function(t,e,n){var o,a;n(98),o=n(51);var r=n(103);a=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(a=o=o.default),"function"==typeof a&&(a=a.options),a.render=r.render,a.staticRenderFns=r.staticRenderFns,t.exports=o},103:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",{attrs:{id:"app"}},[e("leo-validator",{ref:"leoForm",attrs:{forms:t.formOption,tag:"span"}},[e("ul",{staticClass:"MoUpFlo_Module MoUpFlo_enterInfo"},[t._l(t.formOption,function(n,o){return e("li",{staticClass:"clearfix"},[e("label",[e("span",[t._s(n.key)+" : "])," ",e("input",{directives:[{name:"model",rawName:"v-model",value:n.value,expression:"item.value"}],staticClass:"infoVal",attrs:{type:"text"},domProps:{value:t._s(n.value)},on:{input:function(t){t.target.composing||(n.value=t.target.value)}}})])," ",e("span",{on:{click:function(e){t.deleteItem(n)}}},["删除"])," ",e("p",[t._s(n.state)])," ",e("p",[t._s(n.msg)])])})])," ",e("button",{on:{click:t.initForm}},["初始化"])," ",e("button",{on:{click:t.add}},["添加"])," ",e("button",{on:{click:t.submit}},["确定"])," ",e("button",{on:{click:t.reset}},["重置"])])," ",e("leo-validator",{ref:"leoForm1",attrs:{forms:t.formOption1}},[e("span",["form2: "])," ",e("ul",[e("li",{staticClass:"clearfix"},[e("label",[e("span",["花型编号 : "])," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.formOption1[0].value,expression:"formOption1[0]['value']"}],staticClass:"infoVal",attrs:{type:"text"},domProps:{value:t._s(t.formOption1[0].value)},on:{input:function(e){if(!e.target.composing){var n=t.formOption1[0],o="value";Array.isArray(n)?n.splice(o,1,e.target.value):t.formOption1[0].value=e.target.value}}}})])," ",e("p",[t._s(t.formOption1[0].state)])," ",e("p",[t._s(t.formOption1[0].msg)])])," ",e("li",{staticClass:"clearfix"},[e("label",[e("span",["花型编号1 : "])," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.formOption1[1].value,expression:"formOption1[1]['value']"}],staticClass:"infoVal",attrs:{type:"text"},domProps:{value:t._s(t.formOption1[1].value)},on:{input:function(e){if(!e.target.composing){var n=t.formOption1[1],o="value";Array.isArray(n)?n.splice(o,1,e.target.value):t.formOption1[1].value=e.target.value}}}})])," ",e("p",[t._s(t.formOption1[1].state)])," ",e("p",[t._s(t.formOption1[1].msg)])])," ",e("li",{staticClass:"clearfix"},[e("label",[e("span",["花型编号2 : "])," ",e("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.formOption1[2].value[1],expression:"formOption1[2]['value'][1]",modifiers:{lazy:!0}}],staticClass:"infoVal",attrs:{type:"text"},domProps:{value:t._s(t.formOption1[2].value[1])},on:{change:function(e){var n=t.formOption1[2].value,o=1;Array.isArray(n)?n.splice(o,1,e.target.value):t.formOption1[2].value[1]=e.target.value}}})," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.formOption1[2].value[2],expression:"formOption1[2]['value'][2]"}],staticClass:"infoVal",attrs:{type:"text"},domProps:{value:t._s(t.formOption1[2].value[2])},on:{input:function(e){if(!e.target.composing){var n=t.formOption1[2].value,o=2;Array.isArray(n)?n.splice(o,1,e.target.value):t.formOption1[2].value[2]=e.target.value}}}})])," ",e("p",[t._s(t.formOption1[2].state)])," ",e("p",[t._s(t.formOption1[2].msg)])])," ",e("li",{staticClass:"clearfix"},[e("label",[e("span",["花型编号3 : "])," ",e("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.formOption1[3].value[0],expression:"formOption1[3].value[0]",modifiers:{lazy:!0}}],staticClass:"infoVal",attrs:{type:"text"},domProps:{value:t._s(t.formOption1[3].value[0])},on:{change:function(e){var n=t.formOption1[3].value,o=0;Array.isArray(n)?n.splice(o,1,e.target.value):t.formOption1[3].value[0]=e.target.value}}})," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.formOption1[3].value[1],expression:"formOption1[3].value[1]"}],staticClass:"infoVal",attrs:{type:"text"},domProps:{value:t._s(t.formOption1[3].value[1])},on:{input:function(e){if(!e.target.composing){var n=t.formOption1[3].value,o=1;Array.isArray(n)?n.splice(o,1,e.target.value):t.formOption1[3].value[1]=e.target.value}}}})])," ",e("p",[t._s(t.formOption1[3].state)])," ",e("p",[t._s(t.formOption1[3].msg)])])])," ",e("button",{on:{click:t.initForm1}},["初始化"])," ",e("button",{on:{click:t.submit1}},["确定"])," ",e("button",{on:{click:t.reset1}},["重置"])])])},staticRenderFns:[]}}});
//# sourceMappingURL=app.cf77a493dbd55d6e9ad5.js.map